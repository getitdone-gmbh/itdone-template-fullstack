version: "1"
services:
  frontend:
    path: ./frontend
    port: 3000
    public: true
    env:                                                                                                                               
      VITE_API_URL: ${backend.url}/api    

  backend:
    path: ./backend
    port: 8080
    public: true
    env:
      NODE_ENV: production

addons:
  db:
    type: postgres
    attachTo:
      - backend
  auth:                                                                                                                                
    type: zitadel                                                                                                                      
    oidcType: spa                                                                            
    attachTo:                                                                                                                          
      - frontend                                                                                                                       
      - backend     
